[{"kind":2,"language":"surrealql","value":"REMOVE db vega;\nDEFINE db vega;\nDEFINE ns vega;\n\nDEFINE TABLE party SCHEMAFULL;\nDEFINE TABLE market SCHEMAFULL;\n\nDEFINE TABLE order SCHEMAFULL;\nDEFINE FIELD price ON TABLE order TYPE decimal ASSERT type::is::decimal($value);\nDEFINE FIELD size ON TABLE order TYPE decimal ASSERT type::is::decimal($value);\nDEFINE FIELD market ON TABLE order TYPE record(market) ASSERT type::is::record($value);\nDEFINE FIELD party ON TABLE order TYPE record(party) ASSERT type::is::record($value);\n\nDEFINE EVENT updated ON TABLE order THEN {\n    LET $party = $after.party;\n    LET $market = $after.market;\n    UPDATE $party;\n    UPDATE $market;\n    RELATE $party->orders->$this;\n};\n"},{"kind":2,"language":"surrealql","value":"update party:rodger"},{"kind":2,"language":"surrealql","value":"\n-- CREATE order:cake\n--    set price = \"3\";\n\nUPDATE order:foo\n        SET price = type::decimal(113), \n            size = type::decimal(33),\n            market = market:mymarket,\n            party = party:mypty;\n\nUPDATE order:bar\n        SET price = type::decimal(11), \n            size = type::decimal(323),\n            market = market:mymarket,\n            party = party:barpty;\n\n"},{"kind":2,"language":"surrealql","value":"-- relate party:fred->loves->order:foo;\n\n-- select * from order where ->orders->party = party:mypty\n\n-- select *, ->orders from party\n\n-- select * from orders;\n-- select *, ->orders from order;\n\nselect *, <-orders<-party from order;\n-- delete orders;\n"},{"kind":2,"language":"surrealql","value":""},{"kind":2,"language":"surrealql","value":""}]